<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mistrzostwa ≈öwiata - Rzut Ko≈õƒámi</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 8px;
            font-family: 'MS Sans Serif', Arial, sans-serif;
            background-color: #008080;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .window {
            background-color: #c0c0c0;
            border: 2px outset #dfdfdf;
            padding: 2px;
        }
        
        .title-bar {
            background-color: #000080;
            color: white;
            padding: 4px 8px;
            font-weight: bold;
            margin-bottom: 2px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .menu-bar {
            background-color: #c0c0c0;
            border-bottom: 2px solid #808080;
            padding: 4px;
            margin-bottom: 8px;
        }
        
        .menu-item {
            padding: 4px 8px;
            display: inline-block;
            cursor: pointer;
        }
        
        .menu-item.active {
            text-decoration: underline;
        }
        
        .content {
            padding: 12px;
        }
        
        .white-box {
            background-color: #ffffff;
            border: 2px inset #808080;
            padding: 12px;
            margin-bottom: 12px;
        }
        
        .button {
            background-color: #c0c0c0;
            border: 2px outset #dfdfdf;
            padding: 8px 20px;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            font-family: 'MS Sans Serif', Arial;
            margin: 3px;
        }
        
        .button:active {
            border-style: inset;
        }
        
        .button-large {
            padding: 12px 32px;
            font-size: 16px;
        }
        
        .button-green {
            background-color: #008000;
            color: white;
            border: 2px outset #00a000;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
        }
        
        th, td {
            padding: 3px;
            border: 1px solid #808080;
        }
        
        thead tr {
            background-color: #c0c0c0;
        }
        
        .dice {
            display: inline-block;
            width: 24px;
            height: 24px;
            background-color: white;
            border: 2px solid black;
            text-align: center;
            line-height: 20px;
            font-weight: bold;
            margin-right: 2px;
            font-family: Arial;
        }
        
        .dice-empty {
            background-color: #c0c0c0;
        }
        
        .status-bar {
            background-color: #c0c0c0;
            border-top: 2px solid #dfdfdf;
            padding: 4px 8px;
            margin-top: 2px;
            font-size: 11px;
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .scroll-box {
            max-height: 350px;
            overflow-y: auto;
            border: 1px solid #808080;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }
        
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #c0c0c0;
            border: 2px outset #dfdfdf;
            padding: 2px;
            z-index: 1000;
            min-width: 500px;
            max-height: 80vh;
            overflow: auto;
            display: none;
        }
        
        .header-blue {
            background-color: #000080;
            color: white;
            padding: 6px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
            font-size: 12px;
        }
        
        .header-green {
            background-color: #008000;
            color: white;
            padding: 6px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
            font-size: 12px;
        }
        
        .header-purple {
            background-color: #800080;
            color: yellow;
            padding: 6px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .yellow-banner {
            background-color: #ffff00;
            border: 2px solid black;
            padding: 12px;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .mode-button {
            background-color: #c0c0c0;
            border: 2px outset #dfdfdf;
            padding: 16px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            font-family: 'MS Sans Serif', Arial;
            text-align: left;
            margin-bottom: 16px;
            width: 100%;
        }
        
        .mode-button:hover {
            background-color: #d0d0d0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="app"></div>
    </div>

    <script>
        // Dane gry
        const countries = [
            'Polska', 'Niemcy', 'Francja', 'Wlochy', 'Hiszpania', 'Tajlandia',
            'Brazylia', 'Turcja', 'Egipt', 'Japonia', 'Australia', 'Chiny'
        ];
        
        const cities = {
            'Polska': ['Warszawa', 'Krakow', 'Gdansk', 'Wroclaw'],
            'Niemcy': ['Berlin', 'Monachium', 'Hamburg', 'Frankfurt'],
            'Francja': ['Paryz', 'Marsylia', 'Lyon', 'Nicea'],
            'Wlochy': ['Rzym', 'Mediolan', 'Wenecja', 'Florencja'],
            'Hiszpania': ['Madryt', 'Barcelona', 'Sewilla', 'Walencja'],
            'Tajlandia': ['Bangkok', 'Phuket', 'Chiang Mai', 'Pattaya'],
            'Brazylia': ['Rio', 'Sao Paulo', 'Brasilia', 'Salvador'],
            'Turcja': ['Stambu≈Ç', 'Ankara', 'Izmir', 'Antalya'],
            'Egipt': ['Kair', 'Aleksandria', 'Giza', 'Luksor'],
            'Japonia': ['Tokio', 'Osaka', 'Kioto', 'Jokohama'],
            'Australia': ['Sydney', 'Melbourne', 'Brisbane', 'Perth'],
            'Chiny': ['Pekin', 'Szanghaj', 'Guangzhou', 'Shenzhen']
        };
        
        const flags = {
            'Polska': 'üáµüá±', 'Niemcy': 'üá©üá™', 'Francja': 'üá´üá∑', 'Wlochy': 'üáÆüáπ',
            'Hiszpania': 'üá™üá∏', 'Tajlandia': 'üáπüá≠', 'Brazylia': 'üáßüá∑', 'Turcja': 'üáπüá∑',
            'Egipt': 'üá™üá¨', 'Japonia': 'üáØüáµ', 'Australia': 'üá¶üá∫', 'Chiny': 'üá®üá≥'
        };

        const maleNames = {
            'Polska': ['Janusz', 'Waldemar'],
            'Niemcy': ['Hans', 'Fritz'],
            'Francja': ['Pierre', 'Jean'],
            'Wlochy': ['Marco', 'Luigi'],
            'Hiszpania': ['Carlos', 'Jose'],
            'Tajlandia': ['Somchai', 'Niran'],
            'Brazylia': ['Lucas', 'Pedro'],
            'Turcja': ['Mehmet', 'Ahmet'],
            'Egipt': ['Ahmed', 'Mohamed'],
            'Japonia': ['Yuki', 'Kenji'],
            'Australia': ['Jack', 'Oliver'],
            'Chiny': ['Wei', 'Chen']
        };

        const lastNames = {
            'Polska': ['Sobczak', 'Wiaz'],
            'Niemcy': ['Schmidt', 'Muller'],
            'Francja': ['Dubois', 'Martin'],
            'Wlochy': ['Rossi', 'Bianchi'],
            'Hiszpania': ['Garcia', 'Rodriguez'],
            'Tajlandia': ['Srisai', 'Panya'],
            'Brazylia': ['Silva', 'Santos'],
            'Turcja': ['Yilmaz', 'Kaya'],
            'Egipt': ['Hassan', 'Ali'],
            'Japonia': ['Tanaka', 'Suzuki'],
            'Australia': ['Wilson', 'Taylor'],
            'Chiny': ['Wang', 'Li']
        };

        // Stan gry
        let gameState = {
            seasonMode: null,
            totalRounds: 0,
            seasonNumber: 1,
            currentRound: 0,
            players: [],
            history: [],
            allSeasons: [],
            showQualifying: false,
            showFinal: false,
            currentQualifying: null,
            currentFinal: null
        };

        // Inicjalizacja graczy
        function initializePlayers() {
            const players = [];
            countries.forEach((country, countryIndex) => {
                for (let i = 0; i < 2; i++) {
                    players.push({
                        id: countryIndex * 2 + i,
                        name: `${maleNames[country][i]} ${lastNames[country][i]}`,
                        country: country,
                        seasonPoints: 0,
                        finalsCount: 0,
                        seasonStats: []
                    });
                }
            });
            return players;
        }

        // Funkcje gry
        function rollSingleDice(isHome) {
            if (isHome) {
                const roll1 = Math.floor(Math.random() * 6) + 1;
                const roll2 = Math.floor(Math.random() * 6) + 1;
                return Math.max(roll1, roll2);
            }
            return Math.floor(Math.random() * 6) + 1;
        }

        function rollDice(isHome) {
            return Array.from({ length: 6 }, () => rollSingleDice(isHome));
        }

        function sumDice(dice) {
            return dice.reduce((a, b) => a + b, 0);
        }

        function getCurrentCity() {
            const cityIndex = Math.floor(gameState.currentRound / 12);
            const countryIndex = gameState.currentRound % 12;
            return cities[countries[countryIndex]][cityIndex];
        }

        function getCurrentCountry() {
            const countryIndex = gameState.currentRound % 12;
            return countries[countryIndex];
        }

        function compareByHighestDice(diceA, diceB) {
            const sortedA = [...diceA].sort((a, b) => b - a);
            const sortedB = [...diceB].sort((a, b) => b - a);
            
            for (let i = 0; i < 6; i++) {
                if (sortedA[i] !== sortedB[i]) {
                    return sortedB[i] - sortedA[i];
                }
            }
            
            for (let value = 6; value >= 1; value--) {
                const indexA = diceA.indexOf(value);
                const indexB = diceB.indexOf(value);
                
                if (indexA !== -1 && indexB !== -1) {
                    if (indexA !== indexB) {
                        return indexA - indexB;
                    }
                }
            }
            
            return 0;
        }

        function sortPlayersByDice(playersWithDice) {
            return playersWithDice.sort((a, b) => {
                if (a.total !== b.total) {
                    return b.total - a.total;
                }
                return compareByHighestDice(a.dice, b.dice);
            });
        }

        function getPlayersInStartOrder() {
            return [...gameState.players].sort((a, b) => a.seasonPoints - b.seasonPoints);
        }

        function simulateRound() {
            const roundCountry = getCurrentCountry();
            const roundCity = getCurrentCity();
            
            const playersInOrder = getPlayersInStartOrder();
            
            const qualifyingResults = playersInOrder.map(player => {
                const isHome = player.country === roundCountry;
                const dice = rollDice(isHome);
                const total = sumDice(dice);
                return { ...player, dice, total, isHome };
            });
            
            const sortedQualifying = sortPlayersByDice(qualifyingResults);
            const finalistsReversed = [...sortedQualifying.slice(0, 10)].reverse();
            
            const qualifyingBonuses = {
                [sortedQualifying[0].id]: 3,
                [sortedQualifying[1].id]: 2,
                [sortedQualifying[2].id]: 1
            };

            const finalResults = finalistsReversed.map(player => {
                const isHome = player.country === roundCountry;
                const dice = rollDice(isHome);
                const total = sumDice(dice);
                return { ...player, finalDice: dice, finalTotal: total, finalIsHome: isHome };
            });
            
            const sortedFinal = sortPlayersByDice(finalResults.map(p => ({...p, dice: p.finalDice, total: p.finalTotal})))
                .map(p => ({...p, dice: p.finalDice}));

            sortedQualifying.forEach((player, qIndex) => {
                const inFinal = qIndex < 10;
                let finalPos = null;
                let points = 0;
                
                if (inFinal) {
                    finalPos = sortedFinal.findIndex(fp => fp.id === player.id) + 1;
                    const finalPoints = 10 - (finalPos - 1);
                    const bonusPoints = qualifyingBonuses[player.id] || 0;
                    points = finalPoints + bonusPoints;
                    
                    const playerObj = gameState.players.find(p => p.id === player.id);
                    playerObj.seasonPoints += points;
                    
                    if (inFinal) {
                        playerObj.finalsCount++;
                    }
                    
                    playerObj.seasonStats.push({
                        roundNumber: gameState.currentRound + 1,
                        city: roundCity,
                        country: roundCountry,
                        qualifyingPosition: qIndex + 1,
                        inFinal,
                        finalPosition: finalPos,
                        pointsEarned: points
                    });
                }
            });

            const roundResult = {
                roundNumber: gameState.currentRound + 1,
                country: roundCountry,
                city: roundCity,
                qualifying: sortedQualifying,
                final: sortedFinal,
                qualifyingBonuses
            };

            gameState.history.push(roundResult);
            gameState.currentQualifying = sortedQualifying;
            gameState.currentFinal = sortedFinal;
            gameState.showQualifying = true;
            gameState.showFinal = true;
        }

        function selectSeasonMode(mode) {
            gameState.seasonMode = mode;
            if (mode === 'fast') {
                gameState.totalRounds = 12;
            } else if (mode === 'medium') {
                gameState.totalRounds = 24;
            } else if (mode === 'slow') {
                gameState.totalRounds = 48;
            }
            gameState.players = initializePlayers();
            render();
        }

        function startRound() {
            if (gameState.currentRound < gameState.totalRounds) {
                simulateRound();
                render();
            }
        }

        function nextRound() {
            gameState.showQualifying = false;
            gameState.showFinal = false;
            gameState.currentRound++;
            render();
        }

        function startNewSeason() {
            const currentSeasonData = {
                seasonNumber: gameState.seasonNumber,
                rounds: [...gameState.history],
                finalStandings: getStandings().map(p => ({
                    id: p.id,
                    name: p.name,
                    country: p.country,
                    points: p.seasonPoints,
                    finalsCount: p.finalsCount
                }))
            };
            
            gameState.allSeasons.push(currentSeasonData);
            
            gameState.players.forEach(player => {
                player.seasonPoints = 0;
                player.finalsCount = 0;
                player.seasonStats = [];
            });
            
            gameState.seasonNumber++;
            gameState.currentRound = 0;
            gameState.history = [];
            gameState.showQualifying = false;
            gameState.showFinal = false;
            
            render();
        }

        function getStandings() {
            return [...gameState.players].sort((a, b) => b.seasonPoints - a.seasonPoints);
        }

        function getCountryStandings() {
            const countryPoints = {};
            countries.forEach(country => {
                countryPoints[country] = 0;
            });
            
            gameState.players.forEach(player => {
                countryPoints[player.country] += player.seasonPoints;
            });
            
            return Object.entries(countryPoints)
                .map(([country, points]) => ({ country, points }))
                .sort((a, b) => b.points - a.points);
        }

        function formatDice(dice) {
            return dice.map(d => `<span class="dice">${d}</span>`).join('');
        }

        // Renderowanie
        function render() {
            const app = document.getElementById('app');
            
            if (gameState.seasonMode === null) {
                app.innerHTML = renderModeSelection();
            } else {
                app.innerHTML = renderGame();
            }
        }

        function renderModeSelection() {
            return `
                <div class="window">
                    <div class="title-bar">
                        <span>MISTRZOSTWA SWIATA - RZUT KOSCMI - WYBOR TRYBU</span>
                    </div>
                    <div style="padding: 32px; text-align: center;">
                        <div class="white-box">
                            <h2 style="margin-top: 0; font-size: 20px;">WYBIERZ TEMPO SEZONU</h2>
                            <p style="color: #800000; font-size: 14px; margin-bottom: 24px;">
                                UWAGA: Po wyborze nie bedzie mozna zmienic!
                            </p>
                            <div style="max-width: 500px; margin: 0 auto;">
                                <button class="mode-button" onclick="selectSeasonMode('fast')">
                                    <div style="font-size: 18px; margin-bottom: 8px;">‚ö° SZYBKIE SEZONY</div>
                                    <div style="font-size: 13px; font-weight: normal;">
                                        12 rund (1 turniej w kazdym kraju)
                                    </div>
                                </button>
                                <button class="mode-button" onclick="selectSeasonMode('medium')">
                                    <div style="font-size: 18px; margin-bottom: 8px;">‚öñ SREDNIE SEZONY</div>
                                    <div style="font-size: 13px; font-weight: normal;">
                                        24 rundy (2 turnieje w kazdym kraju)
                                    </div>
                                </button>
                                <button class="mode-button" onclick="selectSeasonMode('slow')">
                                    <div style="font-size: 18px; margin-bottom: 8px;">üêå WOLNE SEZONY</div>
                                    <div style="font-size: 13px; font-weight: normal;">
                                        48 rund (4 turnieje w kazdym kraju)
                                    </div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderGame() {
            return `
                <div class="window">
                    <div class="title-bar">
                        <span>MISTRZOSTWA SWIATA - RZUT KOSCMI - SEZON #${gameState.seasonNumber}</span>
                        <span style="font-size: 16px;">‚ñà</span>
                    </div>
                    
                    <div class="menu-bar">
                        <span class="menu-item">Plik</span>
                        <span class="menu-item">Edycja</span>
                        <span class="menu-item ${gameState.history.length > 0 ? 'active' : ''}">Historia</span>
                        <span class="menu-item">Pomoc</span>
                    </div>
                    
                    <div class="content">
                        <div class="white-box">
                            <div style="text-align: center; margin-bottom: 12px;">
                                <div style="font-weight: bold; font-size: 16px; margin-bottom: 8px;">
                                    RUNDA ${gameState.currentRound}/${gameState.totalRounds}
                                </div>
                                ${gameState.currentRound < gameState.totalRounds ? `
                                    <div style="font-size: 14px;">
                                        Lokalizacja: ${getCurrentCity()}, ${getCurrentCountry()}
                                        <div style="font-size: 11px; color: #800000; margin-top: 4px;">
                                            * Zawodnicy z ${getCurrentCountry()} maja wieksze szczescie (rzucaja 2x i bierze sie lepszy wynik)
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                            
                            ${renderMainContent()}
                        </div>
                        
                        <div class="grid-2">
                            <div class="white-box">
                                <div class="header-blue">KLASYFIKACJA ZAWODNIKOW</div>
                                <div class="scroll-box">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Poz</th>
                                                <th>Kraj</th>
                                                <th>Zawodnik</th>
                                                <th>Pkt</th>
                                                <th>F</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            ${renderPlayerStandings()}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="white-box">
                                <div class="header-green">KLASYFIKACJA KRAJOW</div>
                                <div class="scroll-box">
                                    <table>
                                        <tbody>
                                            ${renderCountryStandings()}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-bar">
                        Gospodarze: 2x rzut (lepszy) | Remis: 6&gt;5&gt;4&gt;3&gt;2&gt;1 | Historia: ${gameState.history.length}/${gameState.totalRounds} | Sezon #${gameState.seasonNumber}
                    </div>
                </div>
            `;
        }

        function renderMainContent() {
            if (gameState.currentRound < gameState.totalRounds && !gameState.showQualifying) {
                return `
                    <div style="text-align: center;">
                        <button class="button" onclick="startRound()">ROZPOCZNIJ RUNDE</button>
                    </div>
                `;
            }
            
            if (gameState.currentRound >= gameState.totalRounds && !gameState.showQualifying) {
                return `
                    <div style="text-align: center;">
                        <div class="yellow-banner">*** KONIEC SEZONU #${gameState.seasonNumber} ***</div>
                        <button class="button button-large button-green" onclick="startNewSeason()">
                            ROZPOCZNIJ SEZON #${gameState.seasonNumber + 1}
                        </button>
                    </div>
                `;
            }
            
            let html = '';
            
            if (gameState.showQualifying) {
                html += `
                    <div class="header-blue">KWALIFIKACJE - ${getCurrentCity()}, ${getCurrentCountry()}</div>
                    <div class="white-box" style="max-height: 350px; overflow-y: auto;">
                        <table>
                            <thead>
                                <tr>
                                    <th>Poz</th>
                                    <th>Kraj</th>
                                    <th>Zawodnik</th>
                                    <th>Kosci</th>
                                    <th>Suma</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${renderQualifying()}
                            </tbody>
                        </table>
                    </div>
                `;
            }
            
            if (gameState.showFinal) {
                html += `
                    <div class="header-purple" style="margin-top: 12px;">*** FINAL - ${getCurrentCity()}, ${getCurrentCountry()} ***</div>
                    <div class="white-box">
                        <table>
                            <thead>
                                <tr>
                                    <th>Msc</th>
                                    <th>Kraj</th>
                                    <th>Zawodnik</th>
                                    <th>Kosci</th>
                                    <th>Suma</th>
                                    <th>Punkty</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${renderFinal()}
                            </tbody>
                        </table>
                    </div>
                    <div style="text-align: center; margin-top: 12px;">
                        ${gameState.currentRound < gameState.totalRounds ? `
                            <button class="button" onclick="nextRound()">NASTEPNA RUNDA</button>
                        ` : `
                            <div class="yellow-banner">*** KONIEC SEZONU #${gameState.seasonNumber} ***</div>
                            <button class="button button-large button-green" onclick="startNewSeason()">
                                ROZPOCZNIJ SEZON #${gameState.seasonNumber + 1}
                            </button>
                        `}
                    </div>
                `;
            }
            
            return html;
        }

        function renderQualifying() {
            if (!gameState.currentQualifying) return '';
            
            return gameState.currentQualifying.map((player, index) => {
                const bgColor = index < 10 ? '#00ff00' : '#ff0000';
                return `
                    <tr style="background-color: ${bgColor};">
                        <td style="font-weight: bold;">${index + 1}</td>
                        <td style="font-weight: bold;">${flags[player.country]}</td>
                        <td>${player.name}</td>
                        <td>${formatDice(player.dice)}</td>
                        <td style="text-align: right; font-weight: bold;">${player.total}${player.isHome ? '*' : ''}</td>
                        <td style="text-align: center; font-weight: bold;">
                            ${index < 10 ? 'FINAL' : 'OUT'}
                            ${index < 3 ? ` +${3-index}` : ''}
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function renderFinal() {
            if (!gameState.currentFinal) return '';
            
            const lastRound = gameState.history[gameState.history.length - 1];
            
            return gameState.currentFinal.map((player, index) => {
                const bgColor = index === 0 ? '#ffff00' : index === 1 ? '#c0c0c0' : index === 2 ? '#ff8000' : '#ffffff';
                const bonus = lastRound ? (lastRound.qualifyingBonuses[player.id] || 0) : 0;
                const finalPoints = 10 - index;
                const totalPoints = finalPoints + bonus;
                
                return `
                    <tr style="background-color: ${bgColor};">
                        <td style="font-weight: bold;">${index + 1}</td>
                        <td style="font-weight: bold;">${flags[player.country]}</td>
                        <td style="font-weight: bold;">${player.name}</td>
                        <td>${formatDice(player.dice)}</td>
                        <td style="text-align: right; font-weight: bold;">${player.finalTotal}${player.finalIsHome ? '*' : ''}</td>
                        <td style="text-align: right; font-weight: bold;">
                            +${totalPoints}
                            ${bonus > 0 ? `<span style="font-size: 10px;"> (${finalPoints}+${bonus})</span>` : ''}
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function renderPlayerStandings() {
            return getStandings().map((player, index) => {
                const bgColor = index === 0 ? '#ffff00' : index === 1 ? '#c0c0c0' : index === 2 ? '#ff8000' : '#ffffff';
                return `
                    <tr style="background-color: ${bgColor};">
                        <td style="font-weight: bold;">${index + 1}</td>
                        <td style="font-weight: bold;">${flags[player.country]}</td>
                        <td>${player.name}</td>
                        <td style="text-align: right; font-weight: bold;">${player.seasonPoints}</td>
                        <td style="text-align: center;">${player.finalsCount}</td>
                    </tr>
                `;
            }).join('');
        }

        function renderCountryStandings() {
            return getCountryStandings().map((item, index) => {
                const bgColor = index === 0 ? '#ffff00' : index === 1 ? '#c0c0c0' : index === 2 ? '#ff8000' : '#ffffff';
                return `
                    <tr style="background-color: ${bgColor};">
                        <td style="font-weight: bold;">${index + 1}</td>
                        <td style="font-weight: bold;">${flags[item.country]}</td>
                        <td style="font-weight: bold;">${item.country}</td>
                        <td style="text-align: right; font-weight: bold;">${item.points}</td>
                    </tr>
                `;
            }).join('');
        }

        // Inicjalizacja
        render();
    </script>
</body>
</html>
