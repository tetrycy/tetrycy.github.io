<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Football Card Game - Prototyp</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: #2d5a3d;
            color: white;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(0,0,0,0.5);
            padding: 20px;
            border-radius: 10px;
        }

        .header h1 {
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            margin-bottom: 10px;
        }

        .game-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
        }

        .player-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .health, .goals {
            font-size: 2em;
            font-weight: bold;
            color: #f39c12;
        }

        .mana {
            font-size: 2em;
            font-weight: bold;
            color: #44aaff;
        }

        .turn-info {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
        }

        .battlefield {
            min-height: 180px;
            background: rgba(26, 71, 42, 0.5);
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
        }

        .battlefield.can-attack-direct {
            cursor: crosshair;
            box-shadow: inset 0 0 20px rgba(231, 76, 60, 0.5), 0 0 20px rgba(231, 76, 60, 0.3);
            border-color: #e74c3c;
        }

        .battlefield.can-attack-direct:hover {
            background: rgba(231, 76, 60, 0.2);
        }

        .goalkeeper-area {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .goalkeeper-card {
            width: 200px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            border: 4px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 16px rgba(0,0,0,0.4);
            transition: all 0.3s;
        }

        .goalkeeper-card.open {
            border-color: #e74c3c;
            background: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
            animation: goalkeeperpulse 1s infinite;
        }

        @keyframes goalkeeperpulse {
            0%, 100% { box-shadow: 0 0 15px rgba(231, 76, 60, 0.6); }
            50% { box-shadow: 0 0 30px rgba(231, 76, 60, 0.9); }
        }

        .goalkeeper-card:hover {
            transform: scale(1.05);
        }

        .goalkeeper-card.can-attack {
            cursor: crosshair;
            border-color: #e74c3c;
            animation: goalkeeperpulse 1s infinite;
        }

        .goalkeeper-label {
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #3498db;
        }

        .goalkeeper-card.open .goalkeeper-label {
            color: #e74c3c;
        }

        .goalkeeper-hp {
            font-size: 2em;
            font-weight: bold;
            color: #2ecc71;
            margin-top: 10px;
        }

        .goalkeeper-card.open .goalkeeper-hp {
            color: #e74c3c;
        }

        .goal-progress {
            margin-top: 10px;
            font-size: 1.8em;
        }

        .goal-dot {
            display: inline-block;
            opacity: 0.3;
            margin: 0 5px;
            filter: grayscale(100%);
            transition: all 0.3s;
        }

        .goal-dot.scored {
            opacity: 1;
            filter: grayscale(0%);
            transform: scale(1.2);
        }

        .battlefield-label {
            font-size: 1.2em;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        .cards-on-field {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            min-height: 100px;
            position: relative;
            z-index: 2;
        }

        .hand {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .hand-label {
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .hand-cards {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .card {
            width: 140px;
            min-height: 220px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            border: 3px solid #3498db;
            border-radius: 10px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(52, 152, 219, 0.5);
        }

        .card.selected {
            border-color: #f39c12;
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(243, 156, 18, 0.7);
        }

        .card.playable {
            border-color: #2ecc71;
        }

        .card.can-attack {
            border-color: #e74c3c;
            animation: pulse 1s infinite;
        }

        .card.taunt {
            border-color: #f39c12;
            box-shadow: 0 0 15px rgba(243, 156, 18, 0.6), 0 4px 8px rgba(0,0,0,0.3);
        }

        .card.taunt:hover {
            box-shadow: 0 0 20px rgba(243, 156, 18, 0.8), 0 8px 16px rgba(0,0,0,0.4);
        }

        .card.taunt.can-attack {
            border-color: #e74c3c;
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.6);
        }

        .card.spell-card {
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
            border-color: #9b59b6;
        }

        .card.spell-card:hover {
            box-shadow: 0 8px 16px rgba(155, 89, 182, 0.5);
        }

        .spell-description {
            font-size: 0.75em;
            text-align: center;
            margin-top: 10px;
            color: #ecf0f1;
            line-height: 1.3;
        }

        .ability-buttons {
            display: flex;
            flex-direction: column;
            gap: 3px;
            margin-top: 5px;
        }

        .ability-btn {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
            border: 2px solid #f39c12;
            border-radius: 5px;
            padding: 4px 6px;
            font-size: 0.7em;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            text-align: center;
        }

        .ability-btn:hover {
            transform: scale(1.05);
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
            box-shadow: 0 2px 8px rgba(243, 156, 18, 0.6);
        }

        .ability-btn.on-cooldown {
            opacity: 0.4;
            cursor: not-allowed;
            background: #7f8c8d;
            border-color: #7f8c8d;
        }

        .ability-btn.no-mana {
            opacity: 0.6;
            cursor: not-allowed;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 10px rgba(231, 76, 60, 0.5); }
            50% { box-shadow: 0 0 20px rgba(231, 76, 60, 0.8); }
        }

        .card-cost {
            position: absolute;
            top: -10px;
            left: -10px;
            width: 35px;
            height: 35px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4em;
            font-weight: bold;
            border: 2px solid white;
        }

        .card-name {
            font-size: 1em;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
            min-height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-position {
            text-align: center;
            font-size: 0.8em;
            color: #f39c12;
            margin-bottom: 5px;
        }

        .card-image {
            width: 100%;
            height: 60px;
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            margin: 5px 0;
        }

        .card-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 8px;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 3px;
            font-weight: bold;
        }

        .attack {
            color: #e74c3c;
        }

        .defense {
            color: #3498db;
        }

        .card-ability {
            font-size: 0.65em;
            text-align: center;
            margin-top: 5px;
            color: #f39c12;
            font-style: italic;
            min-height: 20px;
            font-weight: bold;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        button {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .log {
            background: rgba(0,0,0,0.4);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            max-height: 150px;
            overflow-y: auto;
        }

        .log-entry {
            padding: 5px;
            margin: 3px 0;
            border-left: 3px solid #3498db;
            padding-left: 10px;
        }

        .log-entry.attack {
            border-left-color: #e74c3c;
        }

        .log-entry.play {
            border-left-color: #2ecc71;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .modal-content h2 {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .modal-content button {
            margin-top: 20px;
        }

        .faction-select {
            max-width: 800px;
            padding: 50px;
        }

        .faction-select h2 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .faction-options {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .faction-option {
            width: 300px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            border: 4px solid #3498db;
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .faction-option:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(52, 152, 219, 0.5);
            border-color: #2ecc71;
        }

        .faction-option:nth-child(2) {
            border-color: #e74c3c;
        }

        .faction-option:nth-child(2):hover {
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.5);
        }

        .faction-emoji {
            font-size: 5em;
            margin-bottom: 15px;
        }

        .faction-option h3 {
            font-size: 1.8em;
            margin-bottom: 10px;
            color: #ecf0f1;
        }

        .faction-option p {
            color: #bdc3c7;
            font-size: 1em;
        }

        .attack-mode-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(231, 76, 60, 0.95);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.5em;
            font-weight: bold;
            z-index: 100;
            display: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: pulse 1s infinite;
        }

        .attack-mode-indicator.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>‚öΩ Football Card Game ‚öΩ</h1>
            <p>Gra karciania w stylu Hearthstone</p>
        </div>

        <div class="game-info">
            <div class="player-info">
                <div>
                    <div>ü§ñ BOT</div>
                    <div class="health">‚öΩ Gole: <span id="bot-goals">0</span></div>
                </div>
                <div class="mana">üíé <span id="bot-mana">0</span>/10</div>
            </div>

            <div class="turn-info">
                <div>Tura: <span id="turn-number">1</span></div>
                <div id="current-player">TWOJA TURA</div>
            </div>

            <div class="player-info">
                <div>
                    <div>üéÆ TY</div>
                    <div class="health">‚öΩ Gole: <span id="player-goals">0</span></div>
                </div>
                <div class="mana">üíé <span id="player-mana">1</span>/10</div>
            </div>
        </div>

        <div class="goalkeeper-area">
            <div class="goalkeeper-card" id="bot-goalkeeper">
                <div class="goalkeeper-label">ü§ñ Bramkarz Bota</div>
                <div class="goalkeeper-hp">üß§ <span id="bot-goalkeeper-hp">10</span> HP</div>
                <div class="goal-progress">
                    <span class="goal-dot" id="bot-goal-1">‚öΩ</span>
                    <span class="goal-dot" id="bot-goal-2">‚öΩ</span>
                    <span class="goal-dot" id="bot-goal-3">‚öΩ</span>
                </div>
            </div>
        </div>

        <div class="battlefield">
            <div class="battlefield-label">ü§ñ Boisko Bota</div>
            <div class="cards-on-field" id="bot-field"></div>
        </div>

        <div class="battlefield">
            <div class="battlefield-label">üéÆ Twoje Boisko</div>
            <div class="cards-on-field" id="player-field"></div>
        </div>

        <div class="goalkeeper-area">
            <div class="goalkeeper-card" id="player-goalkeeper">
                <div class="goalkeeper-label">üéÆ Tw√≥j Bramkarz</div>
                <div class="goalkeeper-hp">üß§ <span id="player-goalkeeper-hp">10</span> HP</div>
                <div class="goal-progress">
                    <span class="goal-dot" id="player-goal-1">‚öΩ</span>
                    <span class="goal-dot" id="player-goal-2">‚öΩ</span>
                    <span class="goal-dot" id="player-goal-3">‚öΩ</span>
                </div>
            </div>
        </div>

        <div class="hand">
            <div class="hand-label">üé¥ Twoja Rƒôka</div>
            <div class="hand-cards" id="player-hand"></div>
        </div>

        <div class="controls">
            <button id="end-turn-btn">ZAKO≈ÉCZ TURƒò</button>
        </div>

        <div class="log" id="game-log">
            <div class="log-entry">Gra rozpoczƒôta! Powodzenia! ‚öΩ</div>
        </div>
    </div>

    <!-- 
    ============================================
    EDYCJA NAZW I OPIS√ìW DRU≈ªYN (UI)
    ============================================
    Poni≈ºej mo≈ºesz zmieniƒá:
    - Emotki dru≈ºyn (üîµ üî¥)
    - Nazwy dru≈ºyn (Dru≈ºyna A / Dru≈ºyna B)
    - Opisy dru≈ºyn
    
    WA≈ªNE: Nazwy i opisy tutaj to tylko UI!
    Aby zmieniƒá karty dru≈ºyn, id≈∫ do sekcji JavaScript:
    "SYSTEM FRAKCJI - KARTY" (linia ~617)
    -->
    
    <div class="modal active" id="faction-select-modal">
        <div class="modal-content faction-select">
            <h2>‚öΩ WYBIERZ SWOJƒÑ DRU≈ªYNƒò ‚öΩ</h2>
            <p style="margin-bottom: 30px;">Ka≈ºda dru≈ºyna ma unikalne karty i strategiƒô</p>
            
            <div class="faction-options">
                <div class="faction-option" onclick="selectFaction('faction1')">
                    <div class="faction-emoji">üîµ</div>
                    <h3>Dru≈ºyna A</h3>
                    <p>Opis dru≈ºyny A</p>
                </div>
                
                <div class="faction-option" onclick="selectFaction('faction2')">
                    <div class="faction-emoji">üî¥</div>
                    <h3>Dru≈ºyna B</h3>
                    <p>Opis dru≈ºyny B</p>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="game-over-modal">
        <div class="modal-content">
            <h2 id="game-over-text">Koniec Gry!</h2>
            <p id="game-over-message"></p>
            <button onclick="newGame()">NOWA GRA</button>
        </div>
    </div>

    <div class="attack-mode-indicator" id="attack-indicator">
        ‚öîÔ∏è WYBIERZ CEL ATAKU! ‚öîÔ∏è
    </div>

    <div class="attack-mode-indicator" id="spell-indicator" style="background: rgba(155, 89, 182, 0.95);">
        üéØ WYBIERZ CEL ZAKLƒòCIA! üéØ
    </div>

    <script>
        // ============================================
        // SYSTEM FRAKCJI - KARTY
        // ============================================
        
        /* 
         * JAK DODAWAƒÜ KARTY:
         * 
         * 1. TYPY KART:
         *    - type: "minion"  - Zawodnik (trafia na boisko)
         *    - type: "spell"   - Akcja/Taktyka (efekt i znika)
         * 
         * 2. KARTY NEUTRALNE (neutralCards) - dostƒôpne dla WSZYSTKICH dru≈ºyn
         * 3. KARTY FRAKCJI (faction1Cards / faction2Cards) - unikalne dla dru≈ºyny
         * 
         * FORMAT KARTY ZAWODNIKA (MINION):
         * { 
         *   type: "minion",
         *   name: "Nazwa Karty",
         *   position: "ST",
         *   cost: 3,                        // Koszt zagrania
         *   attack: 4,
         *   defense: 2,
         *   emoji: "‚ö°",
         *   abilities: [],                  // Zdolno≈õci pasywne (zawsze aktywne)
         *   activatedAbilities: []          // Zdolno≈õci aktywne (u≈ºywane za manƒô)
         * }
         * 
         * FORMAT KARTY AKCJI (SPELL):
         * {
         *   type: "spell",
         *   name: "Faul Taktyczny",
         *   cost: 2,
         *   emoji: "üü®",
         *   effect: "destroy_enemy_minion",
         *   description: "Zniszcz kartƒô przeciwnika"
         * }
         * 
         * ZDOLNO≈öCI PASYWNE (abilities) - zawsze aktywne:
         * 
         * - "taunt"           - Blokuje atak na bramkarza
         * - "charge"          - Mo≈ºe atakowaƒá od razu po zagraniu
         * - "lifesteal"       - Leczy bramkarza o warto≈õƒá zadanych obra≈ºe≈Ñ
         * - "divine_shield"   - Ignoruje pierwsze otrzymane obra≈ºenia
         * - "battlecry_buff"  - +1 atak/obrona wszystkim sojusznikom przy zagraniu
         * 
         * ZDOLNO≈öCI AKTYWNE (activatedAbilities) - u≈ºywane za manƒô:
         * 
         * {
         *   id: "long_shot",                    // Unikalny ID
         *   name: "Strza≈Ç z dystansu",          // Nazwa zdolno≈õci
         *   cost: 1,                            // Koszt many
         *   emoji: "üéØ",                        // Emotka
         *   effect: "damage_goalkeeper_2",      // ID efektu
         *   description: "Zadaj 2 DMG bramkarzowi",
         *   cooldown: 0                         // (opcjonalne) tury do czekania
         * }
         * 
         * DOSTƒòPNE EFEKTY AKTYWOWANYCH ZDOLNO≈öCI:
         * - "damage_goalkeeper_X"  - Zadaj X obra≈ºe≈Ñ bramkarzowi (X = 1,2,3...)
         * - "heal_self"            - Wylecz tƒô kartƒô
         * - "buff_self"            - +1/+1 do tej karty
         * - "buff_adjacent"        - +1/+1 do sƒÖsiednich kart
         * - "draw_card"            - Dobierz kartƒô
         * 
         * PRZYK≈ÅADY:
         * 
         * Snajper ze strza≈Çem z dystansu:
         * { type: "minion", name: "Snajper", position: "ST", cost: 4, attack: 3, defense: 2, 
         *   emoji: "üéØ", abilities: [], 
         *   activatedAbilities: [{
         *     id: "long_shot", name: "Strza≈Ç z dystansu", cost: 1, emoji: "‚öΩ",
         *     effect: "damage_goalkeeper_2", description: "2 DMG do bramkarza"
         *   }]
         * }
         * 
         * Medyk leczƒÖcy siƒô:
         * { type: "minion", name: "Medyk", position: "CM", cost: 3, attack: 2, defense: 3,
         *   emoji: "üè•", abilities: [],
         *   activatedAbilities: [{
         *     id: "heal", name: "Samoleczenie", cost: 1, emoji: "üíö",
         *     effect: "heal_self", description: "Wylecz siƒô o 2 HP"
         *   }]
         * }
         */
        
        // Karty neutralne - dostƒôpne dla WSZYSTKICH frakcji
        const neutralCards = [
            { type: "minion", name: "M≈Çody Talent", position: "ST", cost: 1, attack: 2, defense: 1, emoji: "‚≠ê", abilities: [] },
            { type: "minion", name: "Skrzyd≈Çowy", position: "W", cost: 2, attack: 3, defense: 2, emoji: "üèÉ", abilities: [] },
            { type: "minion", name: "Napastnik", position: "ST", cost: 3, attack: 4, defense: 2, emoji: "‚ö°", abilities: [] },
            { type: "minion", name: "Obro≈Ñca", position: "CB", cost: 3, attack: 2, defense: 5, emoji: "üõ°Ô∏è", abilities: ["taunt"] },
            { type: "minion", name: "Pomocnik", position: "CM", cost: 4, attack: 3, defense: 4, emoji: "üéØ", abilities: [] },
            { type: "minion", name: "Defensywny Pomocnik", position: "CDM", cost: 4, attack: 2, defense: 6, emoji: "‚öîÔ∏è", abilities: [] },
            { type: "minion", name: "Gwiazda", position: "ST", cost: 6, attack: 6, defense: 4, emoji: "üëë", abilities: [] },
            // TESTOWA KARTA z aktywowanƒÖ zdolno≈õciƒÖ
            { type: "minion", name: "Snajper", position: "ST", cost: 4, attack: 3, defense: 3, emoji: "üéØ", 
              abilities: [], 
              activatedAbilities: [{
                id: "long_shot", 
                name: "Strza≈Ç z dystansu", 
                cost: 1, 
                emoji: "‚öΩ",
                effect: "damage_goalkeeper_2", 
                description: "2 DMG do bramkarza",
                cooldown: 0
              }]
            },
        ];

        // ============================================
        // FRAKCJA 1: [NAZWA DRU≈ªYNY]
        // Dodaj tutaj karty specyficzne dla tej frakcji
        // ============================================
        const faction1Cards = [
            // PRZYK≈ÅADOWE KARTY - USU≈É I DODAJ W≈ÅASNE:
            
            // Przyk≈Çad: Napastnik z szar≈ºƒÖ
            // { type: "minion", name: "B≈Çyskawiczny Napastnik", position: "ST", cost: 4, attack: 4, defense: 2, emoji: "üí®", abilities: ["charge"] },
            
            // Przyk≈Çad: Karta akcji
            // { type: "spell", name: "Faul Taktyczny", cost: 2, emoji: "üü®", effect: "destroy_enemy_minion", description: "Zniszcz kartƒô przeciwnika" },
            
            // Przyk≈Çad: Snajper ze strza≈Çem z dystansu (aktywowana zdolno≈õƒá)
            // { type: "minion", name: "Snajper", position: "ST", cost: 4, attack: 3, defense: 2, emoji: "üéØ", 
            //   abilities: [], 
            //   activatedAbilities: [{
            //     id: "long_shot", name: "Strza≈Ç z dystansu", cost: 1, emoji: "‚öΩ",
            //     effect: "damage_goalkeeper_2", description: "2 DMG do bramkarza"
            //   }]
            // },
            
            // <<<< TUTAJ DODAWAJ KARTY DLA FRAKCJI 1 >>>>
            
        ];

        // ============================================
        // FRAKCJA 2: [NAZWA DRU≈ªYNY]
        // Dodaj tutaj karty specyficzne dla tej frakcji
        // ============================================
        const faction2Cards = [
            // PRZYK≈ÅADOWE KARTY - USU≈É I DODAJ W≈ÅASNE:
            
            // Przyk≈Çad: Pomocnik z battlecry
            // { type: "minion", name: "InspirujƒÖcy Kapitan", position: "CM", cost: 5, attack: 3, defense: 4, emoji: "üí™", abilities: ["battlecry_buff"] },
            
            // Przyk≈Çad: Karta wsparcia
            // { type: "spell", name: "Motywacja", cost: 3, emoji: "üì£", effect: "buff_all_friendly", description: "+1/+1 do wszystkich zawodnik√≥w" },
            
            // Przyk≈Çad: Medyk z samoleczeniem (aktywowana zdolno≈õƒá)
            // { type: "minion", name: "Medyk Dru≈ºyny", position: "CM", cost: 3, attack: 2, defense: 3, emoji: "üè•",
            //   abilities: [],
            //   activatedAbilities: [{
            //     id: "heal", name: "Samoleczenie", cost: 1, emoji: "üíö",
            //     effect: "heal_self", description: "Wylecz siƒô o 2 HP"
            //   }]
            // },
            
            // <<<< TUTAJ DODAWAJ KARTY DLA FRAKCJI 2 >>>>
            
        ];

        // ============================================
        // DEFINICJE FRAKCJI
        // ============================================
        const factions = {
            faction1: {
                id: 'faction1',
                name: 'Dru≈ºyna A',
                emoji: 'üîµ',
                color: '#3498db',
                cards: faction1Cards,
                description: 'Opis dru≈ºyny A'
            },
            faction2: {
                id: 'faction2',
                name: 'Dru≈ºyna B',
                emoji: 'üî¥',
                color: '#e74c3c',
                cards: faction2Cards,
                description: 'Opis dru≈ºyny B'
            }
        };

        // ============================================
        // WYBRANE FRAKCJE (ustawiane przy starcie gry)
        // ============================================
        let selectedFactions = {
            player: null,
            bot: null
        };

        // ============================================
        // SYSTEM EFEKT√ìW I ZDOLNO≈öCI
        // ============================================
        
        // Sprawdzenie czy karta ma danƒÖ zdolno≈õƒá
        function hasAbility(card, abilityName) {
            return card.abilities && card.abilities.includes(abilityName);
        }
        
        // Generowanie opisu zdolno≈õci karty dla UI
        function getAbilityDescription(card) {
            if (!card.abilities || card.abilities.length === 0) {
                return '';
            }
            
            const descriptions = {
                'taunt': 'üõ°Ô∏è OBRO≈ÉCA: Blokuje ataki',
                'charge': '‚ö° SZAR≈ªA: Atakuje od razu',
                'lifesteal': 'üíâ WAMPIRYZM: Leczy bramkarza',
                'divine_shield': '‚ú® TARCZA: Ignoruje obra≈ºenia',
                'battlecry_buff': 'üí™ MOTYWACJA: +1/+1 sojusznikom'
            };
            
            const abilityTexts = card.abilities.map(ability => descriptions[ability] || ability);
            return abilityTexts.join(' ‚Ä¢ ');
        }
        
        // Wykonanie aktywowanej zdolno≈õci jednostki
        function activateAbility(player, fieldIndex, abilityId) {
            const card = gameState[player].field[fieldIndex];
            const ability = card.activatedAbilities?.find(a => a.id === abilityId);
            
            if (!ability) {
                addLog("Zdolno≈õƒá nie znaleziona!", 'play');
                return false;
            }
            
            // Sprawdzenie many
            if (gameState[player].mana < ability.cost) {
                addLog(`Nie masz wystarczajƒÖco many! Potrzebujesz ${ability.cost} many.`, 'play');
                return false;
            }
            
            // Sprawdzenie cooldownu (je≈õli istnieje)
            if (card.abilityCooldowns && card.abilityCooldowns[abilityId] > 0) {
                addLog(`Zdolno≈õƒá niedostƒôpna! Cooldown: ${card.abilityCooldowns[abilityId]} tur`, 'play');
                return false;
            }
            
            // Odejmowanie many
            gameState[player].mana -= ability.cost;
            
            // Wykonanie efektu
            executeActivatedEffect(player, card, ability, fieldIndex);
            
            // Ustawienie cooldownu (je≈õli jest okre≈õlony)
            if (ability.cooldown && ability.cooldown > 0) {
                if (!card.abilityCooldowns) card.abilityCooldowns = {};
                card.abilityCooldowns[abilityId] = ability.cooldown;
            }
            
            addLog(`${card.name} u≈ºywa: ${ability.name}!`, 'play');
            updateUI();
            return true;
        }
        
        // Wykonanie efektu aktywowanej zdolno≈õci
        function executeActivatedEffect(player, card, ability, fieldIndex) {
            const opponentPlayer = player === 'player' ? 'bot' : 'player';
            const effect = ability.effect;
            
            // Parsowanie efekt√≥w z parametrami (np. "damage_goalkeeper_2")
            if (effect.startsWith('damage_goalkeeper_')) {
                const damage = parseInt(effect.split('_')[2]);
                gameState[opponentPlayer].goalkeeperHP -= damage;
                if (gameState[opponentPlayer].goalkeeperHP < 0) {
                    gameState[opponentPlayer].goalkeeperHP = 0;
                }
                addLog(`${card.name}: Bramkarz przeciwnika otrzymuje ${damage} obra≈ºe≈Ñ!`, 'attack');
                
                if (gameState[opponentPlayer].goalkeeperHP <= 0) {
                    addLog(`üö® BRAMKA OTWARTA! Bramkarz pokonany!`, 'attack');
                }
                return;
            }
            
            switch(effect) {
                case 'heal_self':
                    const healAmount = 2;
                    card.defense += healAmount;
                    addLog(`${card.name} leczy siƒô o ${healAmount} HP!`, 'play');
                    break;
                    
                case 'buff_self':
                    card.attack += 1;
                    card.defense += 1;
                    addLog(`${card.name} otrzymuje +1/+1!`, 'play');
                    break;
                    
                case 'buff_adjacent':
                    // Buff do sƒÖsiednich kart
                    if (fieldIndex > 0) {
                        gameState[player].field[fieldIndex - 1].attack += 1;
                        gameState[player].field[fieldIndex - 1].defense += 1;
                    }
                    if (fieldIndex < gameState[player].field.length - 1) {
                        gameState[player].field[fieldIndex + 1].attack += 1;
                        gameState[player].field[fieldIndex + 1].defense += 1;
                    }
                    addLog(`${card.name} wspiera sƒÖsiad√≥w! +1/+1`, 'play');
                    break;
                    
                case 'draw_card':
                    drawCard(player);
                    addLog(`${card.name} pozwala dobraƒá kartƒô!`, 'play');
                    break;
                    
                default:
                    addLog(`Nieznany efekt: ${effect}`, 'play');
            }
        }
        
        // Wykonanie efektu karty spell
        function executeSpellEffect(player, effect) {
            const opponentPlayer = player === 'player' ? 'bot' : 'player';
            
            switch(effect) {
                case 'destroy_enemy_minion':
                    // Gracz wybiera kartƒô przeciwnika do zniszczenia
                    if (gameState[opponentPlayer].field.length > 0) {
                        gameState.spellMode = {
                            active: true,
                            effect: 'destroy_enemy_minion',
                            caster: player
                        };
                        addLog("Wybierz kartƒô przeciwnika do zniszczenia", 'play');
                        document.getElementById('spell-indicator').classList.add('active');
                        updateUI();
                    } else {
                        addLog("Przeciwnik nie ma kart na boisku!", 'play');
                    }
                    break;
                    
                case 'buff_all_friendly':
                    // +1/+1 do wszystkich sojusznik√≥w
                    gameState[player].field.forEach(card => {
                        card.attack += 1;
                        card.defense += 1;
                    });
                    addLog("Wszystkie twoje karty otrzymujƒÖ +1/+1!", 'play');
                    updateUI();
                    break;
                    
                case 'damage_enemy_goalkeeper':
                    // Zadaj obra≈ºenia bramkarzowi przeciwnika
                    const damage = 3; // Mo≈ºna to parametryzowaƒá
                    gameState[opponentPlayer].goalkeeperHP -= damage;
                    if (gameState[opponentPlayer].goalkeeperHP < 0) {
                        gameState[opponentPlayer].goalkeeperHP = 0;
                    }
                    addLog(`Bramkarz przeciwnika otrzymuje ${damage} obra≈ºe≈Ñ!`, 'attack');
                    updateUI();
                    break;
                    
                case 'heal_goalkeeper':
                    // Wylecz swojego bramkarza
                    const heal = 5;
                    gameState[player].goalkeeperHP += heal;
                    if (gameState[player].goalkeeperHP > 10) {
                        gameState[player].goalkeeperHP = 10;
                    }
                    addLog(`Tw√≥j bramkarz odzyskuje ${heal} HP!`, 'play');
                    updateUI();
                    break;
                    
                default:
                    addLog(`Nieznany efekt: ${effect}`, 'play');
            }
        }
        
        // Wykonanie efektu Battlecry przy zagraniu karty
        function triggerBattlecry(player, card) {
            if (hasAbility(card, 'battlecry_buff')) {
                // +1/+1 do wszystkich innych sojusznik√≥w
                gameState[player].field.forEach(minion => {
                    if (minion.id !== card.id) {
                        minion.attack += 1;
                        minion.defense += 1;
                    }
                });
                addLog(`${card.name} daje +1/+1 wszystkim sojusznikom!`, 'play');
            }
        }

        // Stan gry
        let gameState = {
            turn: 1,
            currentPlayer: 'player',
            player: {
                goalkeeperHP: 10,
                goals: 0,
                mana: 1,
                maxMana: 1,
                hand: [],
                field: [],
                deck: []
            },
            bot: {
                goalkeeperHP: 10,
                goals: 0,
                mana: 0,
                maxMana: 0,
                hand: [],
                field: [],
                deck: []
            },
            selectedCard: null,
            attackingCard: null,
            spellMode: null  // { active: true, effect: 'destroy_enemy_minion', caster: 'player' }
        };

        // Inicjalizacja gry
        function initGame() {
            // Sprawdzenie czy frakcje zosta≈Çy wybrane
            if (!selectedFactions.player || !selectedFactions.bot) {
                console.error('Frakcje nie zosta≈Çy wybrane!');
                return;
            }
            
            // Tworzenie talii z wybranych frakcji
            gameState.player.deck = createDeck(selectedFactions.player);
            gameState.bot.deck = createDeck(selectedFactions.bot);
            
            // PoczƒÖtkowe karty
            for (let i = 0; i < 4; i++) {
                drawCard('player');
                drawCard('bot');
            }
            
            updateUI();
            addLog("Gra rozpoczƒôta! Dobrano poczƒÖtkowe karty.", 'play');
            
            // Ukrycie modala wyboru frakcji
            document.getElementById('faction-select-modal').classList.remove('active');
        }

        // Wyb√≥r frakcji przez gracza
        function selectFaction(factionId) {
            selectedFactions.player = factionId;
            
            // Bot wybiera losowƒÖ frakcjƒô
            const factionIds = Object.keys(factions);
            selectedFactions.bot = factionIds[Math.floor(Math.random() * factionIds.length)];
            
            const playerFaction = factions[selectedFactions.player];
            const botFaction = factions[selectedFactions.bot];
            
            addLog(`Wybra≈Çe≈õ: ${playerFaction.emoji} ${playerFaction.name}`, 'play');
            addLog(`Bot wybra≈Ç: ${botFaction.emoji} ${botFaction.name}`, 'play');
            
            // Reset stanu gry
            gameState = {
                turn: 1,
                currentPlayer: 'player',
                player: {
                    goalkeeperHP: 10,
                    goals: 0,
                    mana: 1,
                    maxMana: 1,
                    hand: [],
                    field: [],
                    deck: []
                },
                bot: {
                    goalkeeperHP: 10,
                    goals: 0,
                    mana: 0,
                    maxMana: 0,
                    hand: [],
                    field: [],
                    deck: []
                },
                selectedCard: null,
                attackingCard: null,
                spellMode: null
            };
            
            // Start gry
            initGame();
        }

        // Nowa gra - resetuje wszystko i pokazuje wyb√≥r frakcji
        function newGame() {
            // Reset wybranych frakcji
            selectedFactions.player = null;
            selectedFactions.bot = null;
            
            // Ukrycie modala game over
            document.getElementById('game-over-modal').classList.remove('active');
            
            // Pokazanie modala wyboru frakcji
            document.getElementById('faction-select-modal').classList.add('active');
            
            // Czyszczenie logu
            document.getElementById('game-log').innerHTML = '';
        }

        function createDeck(factionId) {
            const deck = [];
            const faction = factions[factionId];
            
            // ≈ÅƒÖczenie kart neutralnych + kart frakcji
            const allCards = [...neutralCards, ...faction.cards];
            
            // Ka≈ºda karta x3 w talii
            allCards.forEach(card => {
                for (let i = 0; i < 3; i++) {
                    deck.push({ ...card, id: Math.random() });
                }
            });
            
            // Tasowanie
            return deck.sort(() => Math.random() - 0.5);
        }

        function drawCard(player) {
            if (gameState[player].deck.length > 0 && gameState[player].hand.length < 10) {
                const card = gameState[player].deck.pop();
                gameState[player].hand.push(card);
                if (player === 'player') {
                    addLog(`Dobra≈Çe≈õ kartƒô: ${card.name}`, 'play');
                }
                return true;
            }
            return false;
        }

        function playCard(player, cardIndex) {
            const card = gameState[player].hand[cardIndex];
            
            if (gameState[player].mana < card.cost) {
                addLog("Nie masz wystarczajƒÖco many!", 'play');
                return false;
            }
            
            // Odejmowanie many
            gameState[player].mana -= card.cost;
            gameState[player].hand.splice(cardIndex, 1);
            
            if (card.type === 'spell') {
                // KARTA AKCJI - wykonaj efekt i znika
                if (player === 'player') {
                    addLog(`Zagra≈Çe≈õ: ${card.name}`, 'play');
                }
                executeSpellEffect(player, card.effect);
                updateUI();
                return true;
                
            } else if (card.type === 'minion') {
                // KARTA ZAWODNIKA - trafia na boisko
                if (gameState[player].field.length >= 7) {
                    addLog("Boisko pe≈Çne! Maksymalnie 7 kart.", 'play');
                    // Zwr√≥ƒá kartƒô i manƒô
                    gameState[player].hand.push(card);
                    gameState[player].mana += card.cost;
                    return false;
                }
                
                // Ustawianie canAttack - charge pozwala atakowaƒá od razu
                const canAttackNow = hasAbility(card, 'charge');
                const newCard = { ...card, canAttack: canAttackNow, id: Math.random() };
                
                gameState[player].field.push(newCard);
                
                if (player === 'player') {
                    addLog(`Zagra≈Çe≈õ: ${card.name} (${card.position})`, 'play');
                    if (canAttackNow) {
                        addLog(`${card.name} ma SZAR≈ªƒò! Mo≈ºe atakowaƒá od razu!`, 'play');
                    }
                }
                
                // Wykonanie Battlecry
                triggerBattlecry(player, newCard);
                
                updateUI();
                return true;
            }
            
            return false;
        }

        function attack(attackerPlayer, attackerIndex, defenderPlayer, defenderIndex = null) {
            const attacker = gameState[attackerPlayer].field[attackerIndex];
            
            if (!attacker.canAttack) {
                addLog("Ta karta nie mo≈ºe jeszcze atakowaƒá!", 'attack');
                return false;
            }

            // Sprawdzenie czy sƒÖ karty z taunt na polu przeciwnika
            const defenderHasTaunt = gameState[defenderPlayer].field.some(card => hasAbility(card, 'taunt'));

            if (defenderIndex === null) {
                // Atak bezpo≈õredni na bramkarza
                if (!defenderHasTaunt) {
                    // Atak na bramkarza (dozwolony gdy nie ma Obro≈Ñc√≥w)
                    if (gameState[defenderPlayer].goalkeeperHP > 0) {
                        // Bramkarz broni
                        gameState[defenderPlayer].goalkeeperHP -= attacker.attack;
                        addLog(`${attacker.name} atakuje Bramkarza! ${attacker.attack} obra≈ºe≈Ñ!`, 'attack');
                        
                        if (gameState[defenderPlayer].goalkeeperHP <= 0) {
                            gameState[defenderPlayer].goalkeeperHP = 0;
                            addLog(`üö® BRAMKA OTWARTA! Bramkarz pokonany!`, 'attack');
                        }
                    } else {
                        // Bramkarz pokonany - GOL!
                        gameState[attackerPlayer].goals++;
                        addLog(`‚öΩ‚öΩ‚öΩ GOOOOL!!! ${attacker.name} strzela gola!`, 'attack');
                        
                        // Reset bramkarza
                        gameState[defenderPlayer].goalkeeperHP = 10;
                        addLog(`Bramkarz wraca na pozycjƒô (10 HP)`, 'play');
                        
                        checkGameOver();
                    }
                    
                    attacker.canAttack = false;
                    updateUI();
                    return true;
                } else {
                    addLog("Obro≈Ñca blokuje atak! Musisz najpierw zniszczyƒá wszystkich Obro≈Ñc√≥w!", 'attack');
                    return false;
                }
            } else {
                // Atak na kartƒô przeciwnika - zawsze dozwolony (taunt nie blokuje atak√≥w na karty)
                const defender = gameState[defenderPlayer].field[defenderIndex];
                
                addLog(`${attacker.name} (${attacker.attack}) atakuje ${defender.name} (${defender.defense})!`, 'attack');
                
                defender.defense -= attacker.attack;
                attacker.defense -= defender.attack;
                
                // Usuwanie zniszczonych kart
                if (defender.defense <= 0) {
                    gameState[defenderPlayer].field.splice(defenderIndex, 1);
                    addLog(`${defender.name} zosta≈Ç zniszczony!`, 'attack');
                }
                
                if (attacker.defense <= 0) {
                    gameState[attackerPlayer].field.splice(attackerIndex, 1);
                    addLog(`${attacker.name} zosta≈Ç zniszczony!`, 'attack');
                } else {
                    attacker.canAttack = false;
                }
                
                updateUI();
                return true;
            }
        }

        function endTurn() {
            if (gameState.currentPlayer === 'player') {
                gameState.currentPlayer = 'bot';
                document.getElementById('current-player').textContent = 'TURA BOTA';
                addLog("Twoja tura zako≈Ñczona", 'play');
                
                setTimeout(() => {
                    botTurn();
                }, 1000);
            }
        }

        function botTurn() {
            addLog("Bot wykonuje ruch...", 'play');
            
            // Nowa tura
            gameState.turn++;
            gameState.bot.maxMana = Math.min(10, gameState.turn);
            gameState.bot.mana = gameState.bot.maxMana;
            
            // Dobranie karty
            drawCard('bot');
            
            // Od≈õwie≈ºenie mo≈ºliwo≈õci ataku dla kart kt√≥re BY≈ÅY na boisku przed tƒÖ turƒÖ
            gameState.bot.field.forEach(card => {
                card.canAttack = true;
            });
            
            // Bot gra karty (nowe karty dostanƒÖ canAttack = false/true w playCard)
            let played = true;
            while (played) {
                played = false;
                for (let i = 0; i < gameState.bot.hand.length; i++) {
                    if (gameState.bot.hand[i].cost <= gameState.bot.mana && gameState.bot.field.length < 7) {
                        playCard('bot', i);
                        addLog(`Bot zagra≈Ç: ${gameState.bot.hand[i] ? '' : 'kartƒô'}`, 'play');
                        played = true;
                        break;
                    }
                }
            }
            
            updateUI();
            
            setTimeout(() => {
                // Bot atakuje - karty ju≈º majƒÖ canAttack ustawione prawid≈Çowo
                for (let i = gameState.bot.field.length - 1; i >= 0; i--) {
                    if (gameState.bot.field[i] && gameState.bot.field[i].canAttack) {
                        const playerHasTaunt = gameState.player.field.some(card => hasAbility(card, 'taunt'));
                        
                        // Bot decyduje czy atakowaƒá kartƒô czy bramkarza
                        if (gameState.player.field.length > 0 && Math.random() > 0.3) {
                            // 70% szans - atakuj losowƒÖ kartƒô gracza
                            const targetIndex = Math.floor(Math.random() * gameState.player.field.length);
                            attack('bot', i, 'player', targetIndex);
                        } else if (!playerHasTaunt) {
                            // 30% szans - atakuj bramkarza (je≈õli nie ma taunt)
                            attack('bot', i, 'player', null);
                        } else {
                            // Gracz ma taunt - atakuj kartƒô
                            const targetIndex = Math.floor(Math.random() * gameState.player.field.length);
                            attack('bot', i, 'player', targetIndex);
                        }
                    }
                }
                
                updateUI();
                
                setTimeout(() => {
                    // Koniec tury bota
                    gameState.currentPlayer = 'player';
                    gameState.player.maxMana = Math.min(10, gameState.turn);
                    gameState.player.mana = gameState.player.maxMana;
                    
                    // Gracz mo≈ºe atakowaƒá swoimi kartami
                    gameState.player.field.forEach(card => {
                        card.canAttack = true;
                        
                        // Zmniejszanie cooldown√≥w aktywowanych zdolno≈õci
                        if (card.abilityCooldowns) {
                            Object.keys(card.abilityCooldowns).forEach(abilityId => {
                                if (card.abilityCooldowns[abilityId] > 0) {
                                    card.abilityCooldowns[abilityId]--;
                                }
                            });
                        }
                    });
                    
                    drawCard('player');
                    
                    document.getElementById('current-player').textContent = 'TWOJA TURA';
                    addLog("Twoja tura rozpoczƒôta!", 'play');
                    updateUI();
                }, 1500);
            }, 2000);
        }

        function checkGameOver() {
            if (gameState.player.goals >= 3) {
                showGameOver(true);
            } else if (gameState.bot.goals >= 3) {
                showGameOver(false);
            }
        }

        function showGameOver(playerWon) {
            const modal = document.getElementById('game-over-modal');
            const text = document.getElementById('game-over-text');
            const message = document.getElementById('game-over-message');
            
            if (playerWon) {
                text.textContent = 'üéâ WYGRANA! üéâ';
                message.textContent = `Gratulacje! Wygra≈Çe≈õ ${gameState.player.goals}:${gameState.bot.goals}!`;
            } else {
                text.textContent = 'üò¢ PRZEGRANA üò¢';
                message.textContent = `Bot wygra≈Ç ${gameState.bot.goals}:${gameState.player.goals}. Spr√≥buj ponownie!`;
            }
            
            modal.classList.add('active');
        }

        function updateUI() {
            // Aktualizacja statystyk
            document.getElementById('turn-number').textContent = gameState.turn;
            document.getElementById('player-goals').textContent = gameState.player.goals;
            document.getElementById('player-mana').textContent = gameState.player.mana + '/' + gameState.player.maxMana;
            document.getElementById('bot-goals').textContent = gameState.bot.goals;
            document.getElementById('bot-mana').textContent = gameState.bot.mana + '/' + gameState.bot.maxMana;
            
            // Aktualizacja bramkarzy
            document.getElementById('player-goalkeeper-hp').textContent = gameState.player.goalkeeperHP;
            document.getElementById('bot-goalkeeper-hp').textContent = gameState.bot.goalkeeperHP;
            
            // Oznaczanie otwartych bramek
            const playerGoalkeeper = document.getElementById('player-goalkeeper');
            const botGoalkeeper = document.getElementById('bot-goalkeeper');
            
            if (gameState.player.goalkeeperHP <= 0) {
                playerGoalkeeper.classList.add('open');
            } else {
                playerGoalkeeper.classList.remove('open');
            }
            
            if (gameState.bot.goalkeeperHP <= 0) {
                botGoalkeeper.classList.add('open');
            } else {
                botGoalkeeper.classList.remove('open');
            }
            
            // Aktualizacja kropek goli
            for (let i = 1; i <= 3; i++) {
                const playerDot = document.getElementById(`player-goal-${i}`);
                const botDot = document.getElementById(`bot-goal-${i}`);
                
                if (i <= gameState.player.goals) {
                    playerDot.classList.add('scored');
                } else {
                    playerDot.classList.remove('scored');
                }
                
                if (i <= gameState.bot.goals) {
                    botDot.classList.add('scored');
                } else {
                    botDot.classList.remove('scored');
                }
            }
            
            // Aktualizacja rƒôki gracza
            const handDiv = document.getElementById('player-hand');
            handDiv.innerHTML = '';
            gameState.player.hand.forEach((card, index) => {
                const cardEl = createCardElement(card, 'hand', index);
                handDiv.appendChild(cardEl);
            });
            
            // Aktualizacja boiska gracza
            const playerFieldDiv = document.getElementById('player-field');
            playerFieldDiv.innerHTML = '';
            gameState.player.field.forEach((card, index) => {
                const cardEl = createCardElement(card, 'player-field', index);
                playerFieldDiv.appendChild(cardEl);
            });
            
            // Aktualizacja boiska bota
            const botFieldDiv = document.getElementById('bot-field');
            botFieldDiv.innerHTML = '';
            gameState.bot.field.forEach((card, index) => {
                const cardEl = createCardElement(card, 'bot-field', index);
                botFieldDiv.appendChild(cardEl);
            });
            
            // Przycisk zako≈Ñczenia tury
            document.getElementById('end-turn-btn').disabled = gameState.currentPlayer !== 'player';
            
            // Oznaczanie bramkarza bota gdy mo≈ºna go zaatakowaƒá
            const botHasTaunt = gameState.bot.field.some(card => hasAbility(card, 'taunt'));
            if (gameState.attackingCard !== null && !botHasTaunt && gameState.currentPlayer === 'player') {
                botGoalkeeper.classList.add('can-attack');
            } else {
                botGoalkeeper.classList.remove('can-attack');
            }
        }

        function createCardElement(card, location, index) {
            const cardDiv = document.createElement('div');
            cardDiv.className = 'card';
            
            // Oznaczanie kart z taunt
            if (hasAbility(card, 'taunt')) {
                cardDiv.classList.add('taunt');
            }
            
            // Oznaczanie kart, kt√≥re mo≈ºna zagraƒá
            if (location === 'hand' && gameState.currentPlayer === 'player' && 
                gameState.player.mana >= card.cost && gameState.player.field.length < 7) {
                cardDiv.classList.add('playable');
            }
            
            // Oznaczanie kart, kt√≥re mogƒÖ atakowaƒá
            if (location === 'player-field' && card.canAttack && gameState.currentPlayer === 'player') {
                cardDiv.classList.add('can-attack');
            }
            
            // Sprawdzenie czy sƒÖ karty z taunt u przeciwnika
            const opponentHasTaunt = (location === 'bot-field' && gameState.bot.field.some(c => hasAbility(c, 'taunt'))) ||
                                     (location === 'player-field' && gameState.player.field.some(c => hasAbility(c, 'taunt')));
            
            // Generowanie HTML w zale≈ºno≈õci od typu karty
            if (card.type === 'spell') {
                // KARTA AKCJI
                cardDiv.innerHTML = `
                    <div class="card-cost">${card.cost}</div>
                    <div class="card-name">${card.name}</div>
                    <div class="card-position">AKCJA</div>
                    <div class="card-image">${card.emoji}</div>
                    <div class="card-ability spell-description">${card.description || ''}</div>
                `;
                cardDiv.classList.add('spell-card');
            } else {
                // KARTA ZAWODNIKA
                const abilityText = getAbilityDescription(card);
                
                // Generowanie przycisk√≥w aktywowanych zdolno≈õci (tylko na boisku gracza)
                let abilityButtonsHTML = '';
                if (location === 'player-field' && card.activatedAbilities && card.activatedAbilities.length > 0) {
                    abilityButtonsHTML = '<div class="ability-buttons">';
                    card.activatedAbilities.forEach(ability => {
                        const onCooldown = card.abilityCooldowns && card.abilityCooldowns[ability.id] > 0;
                        const noMana = gameState.player.mana < ability.cost;
                        const cooldownClass = onCooldown ? 'on-cooldown' : '';
                        const manaClass = noMana ? 'no-mana' : '';
                        const cooldownText = onCooldown ? ` (${card.abilityCooldowns[ability.id]})` : '';
                        
                        abilityButtonsHTML += `
                            <div class="ability-btn ${cooldownClass} ${manaClass}" 
                                 data-card-index="${index}" 
                                 data-ability-id="${ability.id}"
                                 title="${ability.description}"
                                 onclick="event.stopPropagation(); activateAbility('player', ${index}, '${ability.id}');">
                                ${ability.emoji} ${ability.name} (${ability.cost}üíé)${cooldownText}
                            </div>
                        `;
                    });
                    abilityButtonsHTML += '</div>';
                }
                
                cardDiv.innerHTML = `
                    <div class="card-cost">${card.cost}</div>
                    <div class="card-name">${card.name}</div>
                    <div class="card-position">${card.position}</div>
                    <div class="card-image">${card.emoji}</div>
                    <div class="card-stats">
                        <div class="stat attack">‚öîÔ∏è ${card.attack}</div>
                        <div class="stat defense">üõ°Ô∏è ${card.defense}</div>
                    </div>
                    <div class="card-ability">${abilityText}</div>
                    ${abilityButtonsHTML}
                `;
            }
            
            // Obs≈Çuga klikniƒôƒá
            if (location === 'hand' && gameState.currentPlayer === 'player') {
                cardDiv.onclick = () => playCard('player', index);
            } else if (location === 'player-field' && gameState.currentPlayer === 'player') {
                cardDiv.onclick = () => {
                    if (card.canAttack) {
                        if (gameState.attackingCard === index) {
                            gameState.attackingCard = null;
                            document.getElementById('attack-indicator').classList.remove('active');
                            updateUI();
                        } else {
                            gameState.attackingCard = index;
                            document.getElementById('attack-indicator').classList.add('active');
                            updateUI();
                            cardDiv.classList.add('selected');
                        }
                    }
                };
            } else if (location === 'bot-field') {
                // Obs≈Çuga spell mode - wyb√≥r celu zaklƒôcia
                if (gameState.spellMode && gameState.spellMode.active && gameState.spellMode.caster === 'player') {
                    if (gameState.spellMode.effect === 'destroy_enemy_minion') {
                        cardDiv.onclick = () => {
                            // Zniszczenie wybranej karty
                            gameState.bot.field.splice(index, 1);
                            addLog(`Zniszczono: ${card.name}!`, 'attack');
                            gameState.spellMode = null;
                            document.getElementById('spell-indicator').classList.remove('active');
                            updateUI();
                        };
                        cardDiv.style.cursor = 'crosshair';
                        cardDiv.style.border = '4px solid #9b59b6';
                        cardDiv.style.boxShadow = '0 0 20px rgba(155, 89, 182, 0.8)';
                    }
                }
                // Normalny atak kartƒÖ
                else if (gameState.attackingCard !== null && gameState.currentPlayer === 'player') {
                    // Wszystkie karty bota mo≈ºna atakowaƒá (taunt blokuje tylko bezpo≈õredni atak na gracza)
                    cardDiv.onclick = () => {
                        attack('player', gameState.attackingCard, 'bot', index);
                        gameState.attackingCard = null;
                        document.getElementById('attack-indicator').classList.remove('active');
                    };
                    cardDiv.style.cursor = 'crosshair';
                    cardDiv.style.border = '3px solid #e74c3c';
                }
            }
            
            return cardDiv;
        }

        function addLog(message, type = '') {
            const logDiv = document.getElementById('game-log');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            entry.textContent = message;
            logDiv.insertBefore(entry, logDiv.firstChild);
            
            // Limit wpis√≥w
            while (logDiv.children.length > 20) {
                logDiv.removeChild(logDiv.lastChild);
            }
        }

        // Event listeners
        document.getElementById('end-turn-btn').onclick = endTurn;

        // Atak na bramkarza bota
        document.getElementById('bot-goalkeeper').onclick = () => {
            if (gameState.attackingCard !== null && gameState.currentPlayer === 'player') {
                const botHasTaunt = gameState.bot.field.some(card => card.taunt);
                if (!botHasTaunt) {
                    attack('player', gameState.attackingCard, 'bot', null);
                    gameState.attackingCard = null;
                    document.getElementById('attack-indicator').classList.remove('active');
                } else {
                    addLog("Obro≈Ñca blokuje atak na bramkarza!", 'attack');
                }
            }
        };

        // ≈Åadowanie gry przy klikniƒôciu na boisko bota (atak bezpo≈õredni) - DEPRECATED, teraz atakujemy bramkarza
        document.getElementById('bot-field').onclick = (e) => {
            // Usuniƒôte - teraz atakujemy bramkarza zamiast boiska
        };

        // Start gry - pokazuje modal wyboru frakcji
        // initGame() zostanie wywo≈Çane po wyborze frakcji
        document.getElementById('faction-select-modal').classList.add('active');
    </script>
</body>
</html>
